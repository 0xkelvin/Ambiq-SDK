<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AmbiqSuite Examples Guide: PDM to I2S Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="paramAlign.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="am_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AmbiqSuite Examples Guide<span id="projectnumber">&#160;SDK 5.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">PDM to I2S Example<div class="ingroups"><a class="el" href="group__audio__examples.html">Audio Examples</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Purpose: This example demonstrates PDM to I2S audio conversion functionality for digital microphone integration with external audio devices. The application showcases audio signal processing, converting PDM data from digital microphones to PCM format and forwarding it via I2S interface.</p>
<h1><a class="anchor" id="pdm_to_i2s_features"></a>
Key Features</h1>
<ol type="1">
<li><b>PDM</b> <b>Interface:</b> Receives audio signals from external digital microphone at 16 kHz sample rate with 2.048 MHz PDM clock</li>
<li><b>PCM</b> <b>Conversion:</b> Converts PDM data to PCM format for standard audio processing and transmission</li>
<li><b>I2S</b> <b>Output:</b> Forwards converted PCM data to external I2S devices for audio playback or further processing</li>
<li><b>Digital</b> <b>Microphone</b> <b>Support:</b> Compatible with external digital microphones requiring PDM interface</li>
<li><b>Real</b> <b>Time</b> <b>Processing:</b> Provides continuous audio streaming with minimal latency for live audio applications</li>
</ol>
<h1><a class="anchor" id="pdm_to_i2s_functionality"></a>
Functionality</h1>
<p>The application performs the following operations:</p><ul>
<li>Configures PDM interface for digital microphone audio capture</li>
<li>Captures audio data at 16 kHz sample rate with 2.048 MHz PDM clock</li>
<li>Converts PDM data to PCM format for standard audio processing</li>
<li>Forwards PCM data to external I2S devices via I2S interface</li>
<li>Implements real-time audio streaming with minimal latency</li>
<li>Provides status reporting via ITM/SWO</li>
</ul>
<h1><a class="anchor" id="pdm_to_i2s_usage"></a>
Usage</h1>
<ol type="1">
<li>Connect digital microphone to PDM interface pins (PDM0_CLK, PDM0_DATA)</li>
<li>Connect external I2S device to I2S interface pins (SCLK, WS, DATA_IN)</li>
<li>Compile and download the application to target device</li>
<li>Monitor ITM output for status and configuration information</li>
<li>Observe real-time audio conversion and streaming</li>
</ol>
<h1><a class="anchor" id="pdm_to_i2s_configuration"></a>
Configuration</h1>
<ul>
<li><b>Sample</b> <b>Rate:</b> 16 kHz audio sampling rate</li>
<li><b>PDM</b> <b>Clock:</b> 2.048 MHz PDM clock frequency</li>
<li><b>PCM</b> <b>Format:</b> Standard PCM audio format</li>
<li><b>I2S</b> <b>Interface:</b> Controller mode I2S output</li>
<li><b>ITM/SWO</b>: Output for status and results (1MHz)</li>
</ul>
<p>General pin connections: GPIO_50 PDM0_CLK to CLK_IN of digital microphone GPIO_51 PDM0_DATA to DATA_OUT of digital microphone I2S_CLK_GPIO_PIN to SCLK or BIT_CLK of external I2S device I2S_WS_GPIO_PIN to WS or FRAM_CLK of external I2S device I2S_DATA_OUT_GPIO_PIN to DATA_IN of external I2S device</p>
<p>Printing takes place over the ITM at 1MHz. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structclock__info__table__t.html">clock_info_table_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi2s__clock__info__table__t.html">i2s_clock_info_table_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpdm__to__i2s__vars__t.html">pdm_to_i2s_vars_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gabb6b0d61f4c0b67f6ee7cec3ad6d0704" id="r_gabb6b0d61f4c0b67f6ee7cec3ad6d0704"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabb6b0d61f4c0b67f6ee7cec3ad6d0704">i2s_isr</a>(void)&#160;&#160;&#160;<a class="el" href="#ga79219005e8e6808241f70136e457c67a">am_dspi2s_isrx</a>(<a class="el" href="#gab0f49f2037c7e2ce93205a72c9981787">I2S_MODULE</a>)</td></tr>
<tr class="memdesc:gabb6b0d61f4c0b67f6ee7cec3ad6d0704"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2S interrupt handler.  <br /></td></tr>
<tr class="separator:gabb6b0d61f4c0b67f6ee7cec3ad6d0704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf056b4516c7f54b3898791bc9387d650" id="r_gaf056b4516c7f54b3898791bc9387d650"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf056b4516c7f54b3898791bc9387d650">PDM_MODULE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gaf056b4516c7f54b3898791bc9387d650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab0f49f2037c7e2ce93205a72c9981787" id="r_gab0f49f2037c7e2ce93205a72c9981787"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab0f49f2037c7e2ce93205a72c9981787">I2S_MODULE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gab0f49f2037c7e2ce93205a72c9981787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb51c7007178d54efa213bba6cc557cb" id="r_gabb51c7007178d54efa213bba6cc557cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabb51c7007178d54efa213bba6cc557cb">FIFO_THRESHOLD_CNT</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:gabb51c7007178d54efa213bba6cc557cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd257ce8f541905994e260b06e0ddbc3" id="r_gafd257ce8f541905994e260b06e0ddbc3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafd257ce8f541905994e260b06e0ddbc3">NUM_OF_PCM_SAMPLES</a>&#160;&#160;&#160;320</td></tr>
<tr class="separator:gafd257ce8f541905994e260b06e0ddbc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea9969ff6e3410a3b42461cbb0c5ecb2" id="r_gaea9969ff6e3410a3b42461cbb0c5ecb2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaea9969ff6e3410a3b42461cbb0c5ecb2">DATA_VERIFY</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:gaea9969ff6e3410a3b42461cbb0c5ecb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadeb1448e32d32100d5d0aaa21f118e4c" id="r_gadeb1448e32d32100d5d0aaa21f118e4c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadeb1448e32d32100d5d0aaa21f118e4c">PDM_ISR_TEST_PAD</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:gadeb1448e32d32100d5d0aaa21f118e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac468f4a9cafb0f49e7d584e68beb8b9" id="r_gaac468f4a9cafb0f49e7d584e68beb8b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaac468f4a9cafb0f49e7d584e68beb8b9">I2S_ISR_TEST_PAD</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:gaac468f4a9cafb0f49e7d584e68beb8b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79219005e8e6808241f70136e457c67a" id="r_ga79219005e8e6808241f70136e457c67a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga79219005e8e6808241f70136e457c67a">am_dspi2s_isrx</a>(n)&#160;&#160;&#160;<a class="el" href="#gaa0b47da3681683aa7b7583171fd67986">am_dspi2s_isr</a>(n)</td></tr>
<tr class="separator:ga79219005e8e6808241f70136e457c67a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0b47da3681683aa7b7583171fd67986" id="r_gaa0b47da3681683aa7b7583171fd67986"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa0b47da3681683aa7b7583171fd67986">am_dspi2s_isr</a>(n)&#160;&#160;&#160;am_dspi2s ## n ## _isr</td></tr>
<tr class="separator:gaa0b47da3681683aa7b7583171fd67986"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga306537444209dc91972f17fc71473ff5" id="r_ga306537444209dc91972f17fc71473ff5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga306537444209dc91972f17fc71473ff5">clock_source_t</a> { <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5aca5da6b81c6458c3c69893d9a5c71d68">eCS_HFRC</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c">eCS_PLL</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5a34a955e080bc6fde623e66ed0cf7ba95">eCS_HF2ADJ</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5a917ecdf857a072cc661e0a51c28d148b">eCS_EXRREF</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5ab8661ce437e480af9285b4ae32fb9761">eCS_EXTREF_PLL</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5a60a44d354452206b298b1c142aa3c2e0">eCS_HFXTAL</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5a95f1cab311c917c46abb363cea77afa2">eCS_HFXTAL_DIV2</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5a9aadc8566949ce271c7f1a9831286e30">eCS_HFXTAL_DIV4</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5abe122ace5f87e07e06a284b3f4fa0c7c">eCS_HFRC_DED</a>
, <br />
&#160;&#160;<a class="el" href="#gga306537444209dc91972f17fc71473ff5ae2b8b0ef4dcc09ae6135735bc9cabaff">eCS_MAX_SOURCES</a>
<br />
 }</td></tr>
<tr class="memdesc:ga306537444209dc91972f17fc71473ff5"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of pdm clock options  <a href="#ga306537444209dc91972f17fc71473ff5">More...</a><br /></td></tr>
<tr class="separator:ga306537444209dc91972f17fc71473ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7d2a5dc01a6755e222254195b026a593" id="r_ga7d2a5dc01a6755e222254195b026a593"><td class="memItemLeft" align="right" valign="top">AM_SHARED_RW uint32_t g_ui32PingPongBuffer[2 *<a class="el" href="#gafd257ce8f541905994e260b06e0ddbc3">NUM_OF_PCM_SAMPLES</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7d2a5dc01a6755e222254195b026a593">__attribute__</a> ((aligned(32)))</td></tr>
<tr class="separator:ga7d2a5dc01a6755e222254195b026a593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf8879ad28d5cd9f65567708a732027d" id="r_gadf8879ad28d5cd9f65567708a732027d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadf8879ad28d5cd9f65567708a732027d">am_pdm0_isr</a> (void)</td></tr>
<tr class="memdesc:gadf8879ad28d5cd9f65567708a732027d"><td class="mdescLeft">&#160;</td><td class="mdescRight">PDM interrupt handler.  <br /></td></tr>
<tr class="separator:gadf8879ad28d5cd9f65567708a732027d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840291bc02cba5474a4cb46a9b9566fe" id="r_ga840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:ga840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main.  <br /></td></tr>
<tr class="separator:ga840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaced55e231e8e2f75eed4edd17e3d86d7" id="r_gaced55e231e8e2f75eed4edd17e3d86d7"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group__pdm__fft.html#ga306537444209dc91972f17fc71473ff5">clock_source_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaced55e231e8e2f75eed4edd17e3d86d7">eClockSource</a> = <a class="el" href="group__pdm__fft.html#gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c">eCS_PLL</a></td></tr>
<tr class="separator:gaced55e231e8e2f75eed4edd17e3d86d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc0773cc34fa32d4d76585596f61a841" id="r_gacc0773cc34fa32d4d76585596f61a841"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structclock__info__table__t.html">clock_info_table_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacc0773cc34fa32d4d76585596f61a841">clkInfoTable</a> [<a class="el" href="group__pdm__fft.html#gga306537444209dc91972f17fc71473ff5ae2b8b0ef4dcc09ae6135735bc9cabaff">eCS_MAX_SOURCES</a>]</td></tr>
<tr class="separator:gacc0773cc34fa32d4d76585596f61a841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ba8bce416fddb3acdb98f7343d4d635" id="r_ga9ba8bce416fddb3acdb98f7343d4d635"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structi2s__clock__info__table__t.html">i2s_clock_info_table_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9ba8bce416fddb3acdb98f7343d4d635">g_i2sClkInfoTable</a> [<a class="el" href="group__pdm__fft.html#gga306537444209dc91972f17fc71473ff5ae2b8b0ef4dcc09ae6135735bc9cabaff">eCS_MAX_SOURCES</a>]</td></tr>
<tr class="separator:ga9ba8bce416fddb3acdb98f7343d4d635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1bdc162e486999556866ce6632be6199" id="r_ga1bdc162e486999556866ce6632be6199"><td class="memItemLeft" align="right" valign="top">am_hal_pdm_config_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1bdc162e486999556866ce6632be6199">g_sPdmConfig</a></td></tr>
<tr class="separator:ga1bdc162e486999556866ce6632be6199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ea48216cb31e4166d6c3025a2e84328" id="r_ga8ea48216cb31e4166d6c3025a2e84328"><td class="memItemLeft" align="right" valign="top">am_hal_pdm_transfer_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8ea48216cb31e4166d6c3025a2e84328">g_sTransferPDM</a></td></tr>
<tr class="memdesc:ga8ea48216cb31e4166d6c3025a2e84328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ping pong buffer settings.  <br /></td></tr>
<tr class="separator:ga8ea48216cb31e4166d6c3025a2e84328"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaa0b47da3681683aa7b7583171fd67986" name="gaa0b47da3681683aa7b7583171fd67986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0b47da3681683aa7b7583171fd67986">&#9670;&#160;</a></span>am_dspi2s_isr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define am_dspi2s_isr</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>n</em></span></td><td>)</td>
          <td>&#160;&#160;&#160;am_dspi2s ## n ## _isr</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga79219005e8e6808241f70136e457c67a" name="ga79219005e8e6808241f70136e457c67a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79219005e8e6808241f70136e457c67a">&#9670;&#160;</a></span>am_dspi2s_isrx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define am_dspi2s_isrx</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>n</em></span></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="#gaa0b47da3681683aa7b7583171fd67986">am_dspi2s_isr</a>(n)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaea9969ff6e3410a3b42461cbb0c5ecb2" name="gaea9969ff6e3410a3b42461cbb0c5ecb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea9969ff6e3410a3b42461cbb0c5ecb2">&#9670;&#160;</a></span>DATA_VERIFY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_VERIFY&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gabb51c7007178d54efa213bba6cc557cb" name="gabb51c7007178d54efa213bba6cc557cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb51c7007178d54efa213bba6cc557cb">&#9670;&#160;</a></span>FIFO_THRESHOLD_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIFO_THRESHOLD_CNT&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gabb6b0d61f4c0b67f6ee7cec3ad6d0704" name="gabb6b0d61f4c0b67f6ee7cec3ad6d0704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb6b0d61f4c0b67f6ee7cec3ad6d0704">&#9670;&#160;</a></span>i2s_isr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2s_isr</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>void</em></span></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="#ga79219005e8e6808241f70136e457c67a">am_dspi2s_isrx</a>(<a class="el" href="#gab0f49f2037c7e2ce93205a72c9981787">I2S_MODULE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2S interrupt handler. </p>

</div>
</div>
<a id="gaac468f4a9cafb0f49e7d584e68beb8b9" name="gaac468f4a9cafb0f49e7d584e68beb8b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac468f4a9cafb0f49e7d584e68beb8b9">&#9670;&#160;</a></span>I2S_ISR_TEST_PAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2S_ISR_TEST_PAD&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gab0f49f2037c7e2ce93205a72c9981787" name="gab0f49f2037c7e2ce93205a72c9981787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab0f49f2037c7e2ce93205a72c9981787">&#9670;&#160;</a></span>I2S_MODULE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2S_MODULE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gafd257ce8f541905994e260b06e0ddbc3" name="gafd257ce8f541905994e260b06e0ddbc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd257ce8f541905994e260b06e0ddbc3">&#9670;&#160;</a></span>NUM_OF_PCM_SAMPLES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_OF_PCM_SAMPLES&#160;&#160;&#160;320</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gadeb1448e32d32100d5d0aaa21f118e4c" name="gadeb1448e32d32100d5d0aaa21f118e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadeb1448e32d32100d5d0aaa21f118e4c">&#9670;&#160;</a></span>PDM_ISR_TEST_PAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PDM_ISR_TEST_PAD&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaf056b4516c7f54b3898791bc9387d650" name="gaf056b4516c7f54b3898791bc9387d650"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf056b4516c7f54b3898791bc9387d650">&#9670;&#160;</a></span>PDM_MODULE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PDM_MODULE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga306537444209dc91972f17fc71473ff5" name="ga306537444209dc91972f17fc71473ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga306537444209dc91972f17fc71473ff5">&#9670;&#160;</a></span>clock_source_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__pdm__fft.html#ga306537444209dc91972f17fc71473ff5">clock_source_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>list of pdm clock options </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5aca5da6b81c6458c3c69893d9a5c71d68" name="gga306537444209dc91972f17fc71473ff5aca5da6b81c6458c3c69893d9a5c71d68"></a>eCS_HFRC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c" name="gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c"></a>eCS_PLL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5a34a955e080bc6fde623e66ed0cf7ba95" name="gga306537444209dc91972f17fc71473ff5a34a955e080bc6fde623e66ed0cf7ba95"></a>eCS_HF2ADJ&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5a917ecdf857a072cc661e0a51c28d148b" name="gga306537444209dc91972f17fc71473ff5a917ecdf857a072cc661e0a51c28d148b"></a>eCS_EXRREF&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5ab8661ce437e480af9285b4ae32fb9761" name="gga306537444209dc91972f17fc71473ff5ab8661ce437e480af9285b4ae32fb9761"></a>eCS_EXTREF_PLL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5a60a44d354452206b298b1c142aa3c2e0" name="gga306537444209dc91972f17fc71473ff5a60a44d354452206b298b1c142aa3c2e0"></a>eCS_HFXTAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5a95f1cab311c917c46abb363cea77afa2" name="gga306537444209dc91972f17fc71473ff5a95f1cab311c917c46abb363cea77afa2"></a>eCS_HFXTAL_DIV2&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5a9aadc8566949ce271c7f1a9831286e30" name="gga306537444209dc91972f17fc71473ff5a9aadc8566949ce271c7f1a9831286e30"></a>eCS_HFXTAL_DIV4&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5abe122ace5f87e07e06a284b3f4fa0c7c" name="gga306537444209dc91972f17fc71473ff5abe122ace5f87e07e06a284b3f4fa0c7c"></a>eCS_HFRC_DED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga306537444209dc91972f17fc71473ff5ae2b8b0ef4dcc09ae6135735bc9cabaff" name="gga306537444209dc91972f17fc71473ff5ae2b8b0ef4dcc09ae6135735bc9cabaff"></a>eCS_MAX_SOURCES&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7d2a5dc01a6755e222254195b026a593" name="ga7d2a5dc01a6755e222254195b026a593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d2a5dc01a6755e222254195b026a593">&#9670;&#160;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AM_SHARED_RW uint32_t g_ui32PingPongBuffer[2 *<a class="el" href="#gafd257ce8f541905994e260b06e0ddbc3">NUM_OF_PCM_SAMPLES</a>] __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(aligned(32))</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used as the ping-pong buffer of PDM DMA. Aligned to 32 bytes to meet data cache requirements. </p>

</div>
</div>
<a id="gadf8879ad28d5cd9f65567708a732027d" name="gadf8879ad28d5cd9f65567708a732027d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf8879ad28d5cd9f65567708a732027d">&#9670;&#160;</a></span>am_pdm0_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void am_pdm0_isr </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PDM interrupt handler. </p>

</div>
</div>
<a id="ga840291bc02cba5474a4cb46a9b9566fe" name="ga840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gacc0773cc34fa32d4d76585596f61a841" name="gacc0773cc34fa32d4d76585596f61a841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc0773cc34fa32d4d76585596f61a841">&#9670;&#160;</a></span>clkInfoTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structclock__info__table__t.html">clock_info_table_t</a> clkInfoTable[<a class="el" href="group__pdm__fft.html#gga306537444209dc91972f17fc71473ff5ae2b8b0ef4dcc09ae6135735bc9cabaff">eCS_MAX_SOURCES</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    [<a class="code hl_enumvalue" href="#gga306537444209dc91972f17fc71473ff5aca5da6b81c6458c3c69893d9a5c71d68">eCS_HFRC</a>]      = {.ui32PdmFreq = 24000000, .eClkSpd = AM_HAL_PDM_CLK_HFRC_24MHZ, .bValid = <span class="keyword">true</span> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c">eCS_PLL</a>]       = {.ui32PdmFreq = 24576000, .eClkSpd = AM_HAL_PDM_CLK_PLL, .bValid = <span class="keyword">true</span>  },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#gga306537444209dc91972f17fc71473ff5a34a955e080bc6fde623e66ed0cf7ba95">eCS_HF2ADJ</a>]    = {.ui32PdmFreq = 31250000, .eClkSpd = AM_HAL_PDM_CLK_HFRC2_31MHZ, .bValid = <span class="keyword">true</span> },</div>
<div class="line">    [<a class="code hl_enumvalue" href="#gga306537444209dc91972f17fc71473ff5a917ecdf857a072cc661e0a51c28d148b">eCS_EXRREF</a>]     = {.ui32PdmFreq = 12000000, .ui32DecimationRate = 64, .eClkSpd = AM_HAL_PDM_CLK_EXTREF,  .bValid = <span class="keyword">true</span>},</div>
<div class="line">    [<a class="code hl_enumvalue" href="#gga306537444209dc91972f17fc71473ff5ab8661ce437e480af9285b4ae32fb9761">eCS_EXTREF_PLL</a>] = {.ui32PdmFreq = 24576000, .ui32DecimationRate = 64, .eClkSpd = AM_HAL_PDM_CLK_PLL,  .bValid = <span class="keyword">true</span>  },</div>
<div class="line">}</div>
<div class="ttc" id="agroup__pdm__to__i2s_html_gga306537444209dc91972f17fc71473ff5a34a955e080bc6fde623e66ed0cf7ba95"><div class="ttname"><a href="#gga306537444209dc91972f17fc71473ff5a34a955e080bc6fde623e66ed0cf7ba95">eCS_HF2ADJ</a></div><div class="ttdeci">@ eCS_HF2ADJ</div><div class="ttdef"><b>Definition</b> pdm_to_i2s.c:127</div></div>
<div class="ttc" id="agroup__pdm__to__i2s_html_gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c"><div class="ttname"><a href="#gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c">eCS_PLL</a></div><div class="ttdeci">@ eCS_PLL</div><div class="ttdef"><b>Definition</b> pdm_to_i2s.c:126</div></div>
<div class="ttc" id="agroup__pdm__to__i2s_html_gga306537444209dc91972f17fc71473ff5a917ecdf857a072cc661e0a51c28d148b"><div class="ttname"><a href="#gga306537444209dc91972f17fc71473ff5a917ecdf857a072cc661e0a51c28d148b">eCS_EXRREF</a></div><div class="ttdeci">@ eCS_EXRREF</div><div class="ttdef"><b>Definition</b> pdm_to_i2s.c:128</div></div>
<div class="ttc" id="agroup__pdm__to__i2s_html_gga306537444209dc91972f17fc71473ff5ab8661ce437e480af9285b4ae32fb9761"><div class="ttname"><a href="#gga306537444209dc91972f17fc71473ff5ab8661ce437e480af9285b4ae32fb9761">eCS_EXTREF_PLL</a></div><div class="ttdeci">@ eCS_EXTREF_PLL</div><div class="ttdef"><b>Definition</b> pdm_to_i2s.c:129</div></div>
<div class="ttc" id="agroup__pdm__to__i2s_html_gga306537444209dc91972f17fc71473ff5aca5da6b81c6458c3c69893d9a5c71d68"><div class="ttname"><a href="#gga306537444209dc91972f17fc71473ff5aca5da6b81c6458c3c69893d9a5c71d68">eCS_HFRC</a></div><div class="ttdeci">@ eCS_HFRC</div><div class="ttdef"><b>Definition</b> pdm_to_i2s.c:125</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaced55e231e8e2f75eed4edd17e3d86d7" name="gaced55e231e8e2f75eed4edd17e3d86d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaced55e231e8e2f75eed4edd17e3d86d7">&#9670;&#160;</a></span>eClockSource</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group__pdm__fft.html#ga306537444209dc91972f17fc71473ff5">clock_source_t</a> eClockSource = <a class="el" href="group__pdm__fft.html#gga306537444209dc91972f17fc71473ff5a702ac4e96f53c73fc1b1390ae219774c">eCS_PLL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga9ba8bce416fddb3acdb98f7343d4d635" name="ga9ba8bce416fddb3acdb98f7343d4d635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ba8bce416fddb3acdb98f7343d4d635">&#9670;&#160;</a></span>g_i2sClkInfoTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structi2s__clock__info__table__t.html">i2s_clock_info_table_t</a> g_i2sClkInfoTable[<a class="el" href="group__pdm__fft.html#gga306537444209dc91972f17fc71473ff5ae2b8b0ef4dcc09ae6135735bc9cabaff">eCS_MAX_SOURCES</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1bdc162e486999556866ce6632be6199" name="ga1bdc162e486999556866ce6632be6199"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1bdc162e486999556866ce6632be6199">&#9670;&#160;</a></span>g_sPdmConfig</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">am_hal_pdm_config_t g_sPdmConfig</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    .eClkDivider         = AM_HAL_PDM_MCLKDIV_1,</div>
<div class="line">    .ePDMAClkOutDivder   = AM_HAL_PDM_PDMA_CLKO_DIV5,</div>
<div class="line">    .ui32DecimationRate  = 64,</div>
<div class="line">    .eLeftGain           = AM_HAL_PDM_GAIN_0DB,</div>
<div class="line">    .eRightGain          = AM_HAL_PDM_GAIN_0DB,</div>
<div class="line">    .eStepSize           = AM_HAL_PDM_GAIN_STEP_0_13DB,</div>
<div class="line">    .bHighPassEnable     = AM_HAL_PDM_HIGH_PASS_ENABLE,</div>
<div class="line">    .ui32HighPassCutoff  = 10,</div>
<div class="line">    .bDataPacking        = 1,</div>
<div class="line">    .ePCMChannels        = AM_HAL_PDM_CHANNEL_STEREO,</div>
<div class="line">    .bPDMSampleDelay     = AM_HAL_PDM_CLKOUT_PHSDLY_NONE,</div>
<div class="line">    .ui32GainChangeDelay = AM_HAL_PDM_CLKOUT_DELAY_NONE,</div>
<div class="line">    .bSoftMute           = 0,</div>
<div class="line">    .bLRSwap             = 0,</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8ea48216cb31e4166d6c3025a2e84328" name="ga8ea48216cb31e4166d6c3025a2e84328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ea48216cb31e4166d6c3025a2e84328">&#9670;&#160;</a></span>g_sTransferPDM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">am_hal_pdm_transfer_t g_sTransferPDM</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    .ui32TargetAddr        = (uint32_t)(&amp;g_ui32PingPongBuffer[0]),</div>
<div class="line">    .ui32TargetAddrReverse = (uint32_t)(&amp;g_ui32PingPongBuffer[<a class="code hl_define" href="#gafd257ce8f541905994e260b06e0ddbc3">NUM_OF_PCM_SAMPLES</a>]),</div>
<div class="line">    .ui32TotalCount        = <a class="code hl_define" href="#gafd257ce8f541905994e260b06e0ddbc3">NUM_OF_PCM_SAMPLES</a> * <span class="keyword">sizeof</span>(uint32_t),</div>
<div class="line">}</div>
<div class="ttc" id="agroup__pdm__to__i2s_html_gafd257ce8f541905994e260b06e0ddbc3"><div class="ttname"><a href="#gafd257ce8f541905994e260b06e0ddbc3">NUM_OF_PCM_SAMPLES</a></div><div class="ttdeci">#define NUM_OF_PCM_SAMPLES</div><div class="ttdef"><b>Definition</b> pdm_to_i2s.c:196</div></div>
</div><!-- fragment -->
<p>Ping pong buffer settings. </p>

</div>
</div>
</div><!-- contents -->
<hr size="1">
    <body>
        <div id="footer" align="right">        
            <small>
                Generated on Wed Oct 1 2025 21:34:26 for the AmbiqSuite Examples Guide by&nbsp;
                <a href="http://www.ambiqmicro.com">
                <img class="footer" src="./ambiq_logo.png" alt="Ambiq"/></a>&nbsp&nbsp Copyright &copy; 2025&nbsp&nbsp<br />
                This documentation is licensed and distributed under the <a rel="license" href="http://opensource.org/licenses/BSD-3-Clause">BSD 3-Clause License</a>.&nbsp&nbsp<br/>
            </small>
        </div>
    </body>
</html>
