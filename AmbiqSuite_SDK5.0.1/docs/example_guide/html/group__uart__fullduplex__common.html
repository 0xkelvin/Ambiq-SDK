<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AmbiqSuite Examples Guide: UART FullDuplex Example Common</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="paramAlign.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="am_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AmbiqSuite Examples Guide<span id="projectnumber">&#160;SDK 5.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">UART FullDuplex Example Common<div class="ingroups"><a class="el" href="group__peripheral__examples.html">Peripheral Examples</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Purpose: This module provides shared configuration, pin mapping, and utility functions for UART full-duplex controller and device examples. It enables flexible hardware setup, buffer management, and unified initialization for reliable bidirectional UART communication.</p>
<h1><a class="anchor" id="uart_fullduplex_common_features"></a>
Key Features</h1>
<ol type="1">
<li><b>Pin</b> <b>Mapping:</b> Centralized pin configuration for all UART modules</li>
<li><b>Buffer</b> <b>Management:</b> Shared transmit/receive buffer definitions</li>
<li><b>Hardware</b> <b>Abstraction:</b> Unified hardware setup for controller/device</li>
<li><b>Interrupt</b> <b>Handling:</b> Common ISR and callback utilities</li>
<li><b>Power</b> <b>Optimization:</b> Low-power initialization routines</li>
</ol>
<h1><a class="anchor" id="uart_fullduplex_common_functionality"></a>
Functionality</h1>
<ul>
<li>Pin mapping and configuration for all UART modules</li>
<li>Buffer allocation and alignment for DMA and FIFO</li>
<li>Common setup/teardown routines for power management</li>
<li>Interrupt handler and callback registration</li>
<li>Data validation and checksum utilities</li>
</ul>
<h1><a class="anchor" id="uart_fullduplex_common_usage"></a>
Usage</h1>
<ol type="1">
<li>Include this module in both controller and device examples</li>
<li>Use provided pin mapping and buffer definitions</li>
<li>Call <a class="el" href="group__ios__burst__common.html#gaed7f238eefcf93da05eb1cbba679d5c4">common_setup()</a> and <a class="el" href="#gaa6962da09aa57da30e00bb74d2dfa8db">common_teardown()</a> for board management</li>
<li>Use utility functions for UART configuration and data handling</li>
</ol>
<h1><a class="anchor" id="uart_fullduplex_common_configuration"></a>
Configuration</h1>
<ul>
<li>UART module selection via macros</li>
<li>Pin mapping for controller/device boards</li>
<li>Buffer size and alignment settings</li>
<li>DMA and FIFO configuration options</li>
</ul>
<p>This is part of revision release_sdk5p0p1-0fdea7432e of the AmbiqSuite Development Package. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handshake__gpio_8c.html">handshake_gpio.c</a></td></tr>
<tr class="memdesc:handshake__gpio_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets up and manages the periodic interrupt timer small appends <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handshake__gpio_8h.html">handshake_gpio.h</a></td></tr>
<tr class="memdesc:handshake__gpio_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets up and manages the periodic interrupt timer small appends <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peripherals_2uart__fullduplex__streaming_2common_2mpu__config_8c.html">mpu_config.c</a></td></tr>
<tr class="memdesc:peripherals_2uart__fullduplex__streaming_2common_2mpu__config_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">disabled caching in an SRAM region <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peripherals_2uart__fullduplex__streaming_2common_2mpu__config_8h.html">mpu_config.h</a></td></tr>
<tr class="memdesc:peripherals_2uart__fullduplex__streaming_2common_2mpu__config_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">disabled caching in an SRAM region <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__fullduplex__streaming_2common_2uart__example__timer__control_8c.html">uart_example_timer_control.c</a></td></tr>
<tr class="memdesc:uart__fullduplex__streaming_2common_2uart__example__timer__control_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets up and manages the periodic interrupt timer small appends <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__fullduplex__streaming_2common_2uart__example__timer__control_8h.html">uart_example_timer_control.h</a></td></tr>
<tr class="memdesc:uart__fullduplex__streaming_2common_2uart__example__timer__control_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets up and manages the periodic interrupt timer small appends <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__fullduplex__common_8h.html">uart_fullduplex_common.h</a></td></tr>
<tr class="memdesc:uart__fullduplex__common_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common code and definitions for uart_stream examples. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__fullduplex__streaming_2common_2uart__stream__example__config_8h.html">uart_stream_example_config.h</a></td></tr>
<tr class="memdesc:uart__fullduplex__streaming_2common_2uart__stream__example__config_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common code and definitions for uart_stream examples. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="uart__streaming__utils_8h.html">uart_streaming_utils.h</a></td></tr>
<tr class="memdesc:uart__streaming__utils_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common code and definitions for uart_stream examples. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdma__buiffers__t.html">dma_buiffers_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structuart__cmn__vars__t.html">uart_cmn_vars_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">variable definitions used in this file  <a href="structuart__cmn__vars__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac9196e93ea046f331147b55e5fa36eda" id="r_gac9196e93ea046f331147b55e5fa36eda"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac9196e93ea046f331147b55e5fa36eda">NULL_BUFF_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:gac9196e93ea046f331147b55e5fa36eda"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART buffer sizes for unused buffers.  <br /></td></tr>
<tr class="separator:gac9196e93ea046f331147b55e5fa36eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9196e93ea046f331147b55e5fa36eda" id="r_gac9196e93ea046f331147b55e5fa36eda"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac9196e93ea046f331147b55e5fa36eda">NULL_BUFF_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:gac9196e93ea046f331147b55e5fa36eda"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART buffer sizes for unused buffers.  <br /></td></tr>
<tr class="separator:gac9196e93ea046f331147b55e5fa36eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga36c0cd5c8856b4e4c28ba86554f2eace" id="r_ga36c0cd5c8856b4e4c28ba86554f2eace"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga36c0cd5c8856b4e4c28ba86554f2eace">UART_MAX</a>&#160;&#160;&#160;AM_REG_UART_NUM_MODULES</td></tr>
<tr class="separator:ga36c0cd5c8856b4e4c28ba86554f2eace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d0e54dfae1803b1dcf0b5199f21524c" id="r_ga4d0e54dfae1803b1dcf0b5199f21524c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4d0e54dfae1803b1dcf0b5199f21524c">RX_DMA_ERROR_MASK</a>&#160;&#160;&#160;(AM_HAL_UART_RX_DMA_ERROR | AM_HAL_UART_RX_DMA_TIMEOUT | AM_HAL_UART_RX_DMA_OVERFLOW | AM_HAL_UART_STREAM_DMA_CFG_ERROR)</td></tr>
<tr class="memdesc:ga4d0e54dfae1803b1dcf0b5199f21524c"><td class="mdescLeft">&#160;</td><td class="mdescRight">called from uart ISR for rx errors and completion  <br /></td></tr>
<tr class="separator:ga4d0e54dfae1803b1dcf0b5199f21524c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafa584190d66da2c5887edc86525a384f" id="r_gafa584190d66da2c5887edc86525a384f"><td class="memItemLeft" align="right" valign="top">AM_SHARED_RW <a class="el" href="structdma__buiffers__t.html">dma_buiffers_t</a> g_dma_buffers&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafa584190d66da2c5887edc86525a384f">__attribute__</a> ((aligned(32)))</td></tr>
<tr class="separator:gafa584190d66da2c5887edc86525a384f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9788a89472de768511bd6baa3496cd8a" id="r_ga9788a89472de768511bd6baa3496cd8a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9788a89472de768511bd6baa3496cd8a">fd_common_setup</a> (void)</td></tr>
<tr class="memdesc:ga9788a89472de768511bd6baa3496cd8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the UART configuration for full-duplex communication.  <br /></td></tr>
<tr class="separator:ga9788a89472de768511bd6baa3496cd8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga842c4c2f6b8158d6761a32c4d563713a" id="r_ga842c4c2f6b8158d6761a32c4d563713a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga842c4c2f6b8158d6761a32c4d563713a">mcu_setup</a> (void)</td></tr>
<tr class="memdesc:ga842c4c2f6b8158d6761a32c4d563713a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the MCU for low-power operation, configures clocks, and enables debugging interfaces.  <br /></td></tr>
<tr class="separator:ga842c4c2f6b8158d6761a32c4d563713a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1dfc85aef9c4a98b94b8dcf61badb63" id="r_gab1dfc85aef9c4a98b94b8dcf61badb63"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab1dfc85aef9c4a98b94b8dcf61badb63">init_uart</a> (<a class="el" href="uart__fullduplex__common_8h.html#aef64af9990ad7e843d340e6954308857">transfer_type_t</a> eTxType, uint32_t uartInstance)</td></tr>
<tr class="memdesc:gab1dfc85aef9c4a98b94b8dcf61badb63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a UART instance for the specified transfer type (RX or TX).  <br /></td></tr>
<tr class="separator:gab1dfc85aef9c4a98b94b8dcf61badb63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87e903ae73141e45dd03cce004f39efb" id="r_ga87e903ae73141e45dd03cce004f39efb"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga87e903ae73141e45dd03cce004f39efb">uart_fd_init</a> (<a class="el" href="structuart__vars__t.html">uart_vars_t</a> *pUartVar)</td></tr>
<tr class="memdesc:ga87e903ae73141e45dd03cce004f39efb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the UART hardware with the appropriate configuration based on the provided UART variables.  <br /></td></tr>
<tr class="separator:ga87e903ae73141e45dd03cce004f39efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9cbc85e4cba89b1e0c22fcc71ac21e8" id="r_gaa9cbc85e4cba89b1e0c22fcc71ac21e8"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa9cbc85e4cba89b1e0c22fcc71ac21e8">uart_run_fullduplex_test</a> (void)</td></tr>
<tr class="memdesc:gaa9cbc85e4cba89b1e0c22fcc71ac21e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a full-duplex UART test, which involves transmitting and receiving data using UART DMA and verifying the data integrity.  <br /></td></tr>
<tr class="separator:gaa9cbc85e4cba89b1e0c22fcc71ac21e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6962da09aa57da30e00bb74d2dfa8db" id="r_gaa6962da09aa57da30e00bb74d2dfa8db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa6962da09aa57da30e00bb74d2dfa8db">common_teardown</a> (void)</td></tr>
<tr class="separator:gaa6962da09aa57da30e00bb74d2dfa8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga5aa90eee3dc3b3d57de8333023907386" id="r_ga5aa90eee3dc3b3d57de8333023907386"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5aa90eee3dc3b3d57de8333023907386">ui8SeedVal</a> = 0</td></tr>
<tr class="separator:ga5aa90eee3dc3b3d57de8333023907386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad5e5805a291fe3a81fc1d9d1bceee32" id="r_gaad5e5805a291fe3a81fc1d9d1bceee32"><td class="memItemLeft" align="right" valign="top">const am_hal_uart_rxdma_params_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaad5e5805a291fe3a81fc1d9d1bceee32">RxDmaParams</a></td></tr>
<tr class="memdesc:gaad5e5805a291fe3a81fc1d9d1bceee32"><td class="mdescLeft">&#160;</td><td class="mdescRight">rxdma setup parameters  <br /></td></tr>
<tr class="separator:gaad5e5805a291fe3a81fc1d9d1bceee32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace406ebf490b71426cd5ae02ac8ebf1e" id="r_gace406ebf490b71426cd5ae02ac8ebf1e"><td class="memItemLeft" align="right" valign="top">const am_hal_uart_stream_data_config_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gace406ebf490b71426cd5ae02ac8ebf1e">sTxDataCfg</a></td></tr>
<tr class="separator:gace406ebf490b71426cd5ae02ac8ebf1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49ae35a9984a55a5f66082fd2a77e730" id="r_ga49ae35a9984a55a5f66082fd2a77e730"><td class="memItemLeft" align="right" valign="top">const am_hal_uart_stream_data_config_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga49ae35a9984a55a5f66082fd2a77e730">sRxDataCfg</a></td></tr>
<tr class="separator:ga49ae35a9984a55a5f66082fd2a77e730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2eb583ceca43616289df3381f28dab3f" id="r_ga2eb583ceca43616289df3381f28dab3f"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2eb583ceca43616289df3381f28dab3f">delay_numerator_usec</a> = <a class="el" href="uart__fullduplex__common_8h.html#a5218bcb2a3a88628eefa12ce0b80091a">UART_DMA_SIZE</a> * 16ull * 1000000ull</td></tr>
<tr class="memdesc:ga2eb583ceca43616289df3381f28dab3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">compute a farily unforgiving timeout for the DMA transfer  <br /></td></tr>
<tr class="separator:ga2eb583ceca43616289df3381f28dab3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gac9196e93ea046f331147b55e5fa36eda" name="gac9196e93ea046f331147b55e5fa36eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac9196e93ea046f331147b55e5fa36eda">&#9670;&#160;</a></span>NULL_BUFF_SIZE <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NULL_BUFF_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART buffer sizes for unused buffers. </p>

</div>
</div>
<a id="gac9196e93ea046f331147b55e5fa36eda" name="gac9196e93ea046f331147b55e5fa36eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac9196e93ea046f331147b55e5fa36eda">&#9670;&#160;</a></span>NULL_BUFF_SIZE <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NULL_BUFF_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART buffer sizes for unused buffers. </p>

</div>
</div>
<a id="ga4d0e54dfae1803b1dcf0b5199f21524c" name="ga4d0e54dfae1803b1dcf0b5199f21524c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4d0e54dfae1803b1dcf0b5199f21524c">&#9670;&#160;</a></span>RX_DMA_ERROR_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_DMA_ERROR_MASK&#160;&#160;&#160;(AM_HAL_UART_RX_DMA_ERROR | AM_HAL_UART_RX_DMA_TIMEOUT | AM_HAL_UART_RX_DMA_OVERFLOW | AM_HAL_UART_STREAM_DMA_CFG_ERROR)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>called from uart ISR for rx errors and completion </p>
<dl class="section note"><dt>Note</dt><dd>this is called from an ISR</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psCBData</td><td>pointer to stack variable populated in ISR </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga36c0cd5c8856b4e4c28ba86554f2eace" name="ga36c0cd5c8856b4e4c28ba86554f2eace"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga36c0cd5c8856b4e4c28ba86554f2eace">&#9670;&#160;</a></span>UART_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_MAX&#160;&#160;&#160;AM_REG_UART_NUM_MODULES</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gafa584190d66da2c5887edc86525a384f" name="gafa584190d66da2c5887edc86525a384f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa584190d66da2c5887edc86525a384f">&#9670;&#160;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AM_SHARED_RW <a class="el" href="structdma__buiffers__t.html">dma_buiffers_t</a> g_dma_buffers __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(aligned(32))</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gaa6962da09aa57da30e00bb74d2dfa8db" name="gaa6962da09aa57da30e00bb74d2dfa8db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6962da09aa57da30e00bb74d2dfa8db">&#9670;&#160;</a></span>common_teardown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void common_teardown </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga9788a89472de768511bd6baa3496cd8a" name="ga9788a89472de768511bd6baa3496cd8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9788a89472de768511bd6baa3496cd8a">&#9670;&#160;</a></span>fd_common_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t fd_common_setup </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the UART configuration for full-duplex communication. </p>
<p>This function performs initialization and configuration for UART transmit and receive modules. It verifies that the transmit and receive UART modules are not the same, initializes the UART pins, sets up the RX and TX UART modules, and prints the pin configuration. Any errors during this process are logged and the corresponding error code is returned.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns AM_HAL_STATUS_SUCCESS on success, or an appropriate error code from am_hal_status_e if a failure occurs during initialization. </dd></dl>

</div>
</div>
<a id="gab1dfc85aef9c4a98b94b8dcf61badb63" name="gab1dfc85aef9c4a98b94b8dcf61badb63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1dfc85aef9c4a98b94b8dcf61badb63">&#9670;&#160;</a></span>init_uart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t init_uart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uart__fullduplex__common_8h.html#aef64af9990ad7e843d340e6954308857">transfer_type_t</a></td>          <td class="paramname"><span class="paramname"><em>eTxType</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>uartInstance</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a UART instance for the specified transfer type (RX or TX). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eTxType</td><td>The transfer type, either RX (eTrxTypeRx) or TX (eTrxTypeTx). </td></tr>
    <tr><td class="paramname">uartInstance</td><td>The UART instance number to initialize. Valid values are less than UART_MAX. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns AM_HAL_STATUS_SUCCESS on successful initialization, or appropriate error codes:<ul>
<li>AM_HAL_STATUS_INVALID_ARG if uartInstance or eTxType is invalid. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga842c4c2f6b8158d6761a32c4d563713a" name="ga842c4c2f6b8158d6761a32c4d563713a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga842c4c2f6b8158d6761a32c4d563713a">&#9670;&#160;</a></span>mcu_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mcu_setup </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the MCU for low-power operation, configures clocks, and enables debugging interfaces. </p>
<p>standard MCU setup calls</p>
<p>This function sets up the board for low power consumption, enables the ITM print interface, and configures the clocking mechanisms depending on the specific hardware configuration. On certain hardware, it enables HFADJ and configures the SYSPLL or PLLPOSTDIV as required.</p>
<dl class="section return"><dt>Returns</dt><dd>A status code indicating the success or failure of the initialization process.<ul>
<li>0: Success</li>
<li>Non-zero: Error code indicating the specific failure.</li>
</ul>
</dd>
<dd>
standard hal status </dd></dl>

</div>
</div>
<a id="ga87e903ae73141e45dd03cce004f39efb" name="ga87e903ae73141e45dd03cce004f39efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87e903ae73141e45dd03cce004f39efb">&#9670;&#160;</a></span>uart_fd_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t uart_fd_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuart__vars__t.html">uart_vars_t</a> *</td>          <td class="paramname"><span class="paramname"><em>pUartVar</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the UART hardware with the appropriate configuration based on the provided UART variables. </p>
<p>This function sets up the GPIO pins, initializes the UART hardware instance, powers on the UART, configures UART parameters (such as baud rate and stop bits), and enables required interrupts. The function ensures that the operation is only performed if the specific pin and instance are valid and operational. It elevates the interrupt priority for high-speed testing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pUartVar</td><td>Pointer to a <a class="el" href="structuart__vars__t.html">uart_vars_t</a> structure containing configuration details and hardware definitions for the UART. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>AM_HAL_STATUS_SUCCESS on successful initialization. On failure, returns an appropriate error code such as AM_HAL_STATUS_INVALID_OPERATION, AM_HAL_STATUS_INVALID_ARG, or any other relevant error indicating the stage of failure. </dd></dl>
<p>Config the low-level uart params (baud rate, stop bits)</p>

</div>
</div>
<a id="gaa9cbc85e4cba89b1e0c22fcc71ac21e8" name="gaa9cbc85e4cba89b1e0c22fcc71ac21e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9cbc85e4cba89b1e0c22fcc71ac21e8">&#9670;&#160;</a></span>uart_run_fullduplex_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t uart_run_fullduplex_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes a full-duplex UART test, which involves transmitting and receiving data using UART DMA and verifying the data integrity. </p>
<p>The method performs the following actions:</p><ul>
<li>Initializes the UART receive and transmit DMA parameters.</li>
<li>Transmits a test packet and waits for both the transmit and receive to complete.</li>
<li>Handles timeouts and checks for errors in received data.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>AM_HAL_STATUS_SUCCESS on successful execution of the test and data validation; AM_HAL_STATUS_FAIL on errors such as DMA timeout or data verification failures. </dd></dl>
<p>using ping pong double buffer, only need to start this once</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga2eb583ceca43616289df3381f28dab3f" name="ga2eb583ceca43616289df3381f28dab3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2eb583ceca43616289df3381f28dab3f">&#9670;&#160;</a></span>delay_numerator_usec</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint64_t delay_numerator_usec = <a class="el" href="uart__fullduplex__common_8h.html#a5218bcb2a3a88628eefa12ce0b80091a">UART_DMA_SIZE</a> * 16ull * 1000000ull</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>compute a farily unforgiving timeout for the DMA transfer </p>

</div>
</div>
<a id="gaad5e5805a291fe3a81fc1d9d1bceee32" name="gaad5e5805a291fe3a81fc1d9d1bceee32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad5e5805a291fe3a81fc1d9d1bceee32">&#9670;&#160;</a></span>RxDmaParams</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const am_hal_uart_rxdma_params_t RxDmaParams</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    .bEnableRxDMA = <span class="keyword">true</span>,   </div>
<div class="line">    .bClearFifo = <span class="keyword">true</span>,     </div>
<div class="line">    .bEnableRxTimeout = <span class="keyword">false</span>,  </div>
<div class="line">    .bForceDmaRestart = <span class="keyword">true</span>,</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>rxdma setup parameters </p>

</div>
</div>
<a id="ga49ae35a9984a55a5f66082fd2a77e730" name="ga49ae35a9984a55a5f66082fd2a77e730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49ae35a9984a55a5f66082fd2a77e730">&#9670;&#160;</a></span>sRxDataCfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const am_hal_uart_stream_data_config_t sRxDataCfg</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    .eStreamingDmaMode = AM_HAL_UART_DMA_RX_DOUBLE,</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    .sRxStreamConfig =</div>
<div class="line">    {</div>
<div class="line">        .ui32NumBytesToRead         =  <a class="code hl_define" href="uart__fullduplex__common_8h.html#a5218bcb2a3a88628eefa12ce0b80091a">UART_DMA_SIZE</a>,</div>
<div class="line">        .pfRxCallback               = rx_callback,</div>
<div class="line">        .ui32RxCallbackThreshold    =  UART_BUFFER_SIZE,</div>
<div class="line">        .ui32TimeoutMs              = 0,</div>
<div class="line">        .bClearRxFifo               = <span class="keyword">false</span>,</div>
<div class="line">        .sRxBuffer  = { .pui8Buff = g_dma_buffers.ui8RxBuffer, .ui32BufferSize = UART_BUFFER_SIZE  }, </div>
<div class="line">    },</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    .sTxStreamConfig =</div>
<div class="line">    {</div>
<div class="line">        .pfTxCallback       = NULL,</div>
<div class="line">        .eTxCompleteMode    = eAM_HAL_TX_COMPL_TX_COMPLETE,</div>
<div class="line">        .eTxCompleteNotificationAction = eAM_HAL_TX_COMPL_TX_COMPLETE,</div>
<div class="line">        .sTxBuffer = { .pui8Buff = g_dma_buffers.ui8RxTxBuffer, .ui32BufferSize = <a class="code hl_define" href="#gac9196e93ea046f331147b55e5fa36eda">NULL_BUFF_SIZE</a>  }, </div>
<div class="line">    },</div>
<div class="line">}</div>
<div class="ttc" id="agroup__uart__fullduplex__common_html_gac9196e93ea046f331147b55e5fa36eda"><div class="ttname"><a href="#gac9196e93ea046f331147b55e5fa36eda">NULL_BUFF_SIZE</a></div><div class="ttdeci">#define NULL_BUFF_SIZE</div><div class="ttdoc">UART buffer sizes for unused buffers.</div><div class="ttdef"><b>Definition</b> uart_fullduplex_common.c:96</div></div>
<div class="ttc" id="auart__fullduplex__common_8h_html_a5218bcb2a3a88628eefa12ce0b80091a"><div class="ttname"><a href="uart__fullduplex__common_8h.html#a5218bcb2a3a88628eefa12ce0b80091a">UART_DMA_SIZE</a></div><div class="ttdeci">#define UART_DMA_SIZE</div><div class="ttdef"><b>Definition</b> uart_fullduplex_common.h:58</div></div>
</div><!-- fragment --><p>Configure uart streaming setup parameters This is the rx config, the tx part of this uart isn't used in this example </p>

</div>
</div>
<a id="gace406ebf490b71426cd5ae02ac8ebf1e" name="gace406ebf490b71426cd5ae02ac8ebf1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace406ebf490b71426cd5ae02ac8ebf1e">&#9670;&#160;</a></span>sTxDataCfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const am_hal_uart_stream_data_config_t sTxDataCfg</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    .eStreamingDmaMode = AM_HAL_UART_DMA_TX_DOUBLE_BUFFER,</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    .sRxStreamConfig =</div>
<div class="line">    {</div>
<div class="line">        .ui32NumBytesToRead         =  32,</div>
<div class="line">        .pfRxCallback               = 0,</div>
<div class="line">        .ui32RxCallbackThreshold    =  32,</div>
<div class="line">        .ui32TimeoutMs              = 0,</div>
<div class="line">        .bClearRxFifo               = <span class="keyword">false</span>,</div>
<div class="line">        .sRxBuffer  = { .pui8Buff = g_dma_buffers.ui8TxRxBuffer, .ui32BufferSize = <a class="code hl_define" href="#gac9196e93ea046f331147b55e5fa36eda">NULL_BUFF_SIZE</a>  }, </div>
<div class="line">    },</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    .sTxStreamConfig =</div>
<div class="line">    {</div>
<div class="line">        .pfTxCallback       = tx_complete_callback,</div>
<div class="line">        .eTxCompleteMode    = eAM_HAL_TX_COMPL_TX_COMPLETE,</div>
<div class="line">        .eTxCompleteNotificationAction = eAM_HAL_TX_COMPL_TX_COMPLETE,</div>
<div class="line">        .sTxBuffer = { .pui8Buff = g_dma_buffers.ui8TxBuffer, .ui32BufferSize = UART_BUFFER_SIZE  }, </div>
<div class="line">    },</div>
<div class="line">}</div>
</div><!-- fragment --><p>Configure uart streaming setup parameters This is the tx config, the rx part of this uart isn't used in this example </p>

</div>
</div>
<a id="ga5aa90eee3dc3b3d57de8333023907386" name="ga5aa90eee3dc3b3d57de8333023907386"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5aa90eee3dc3b3d57de8333023907386">&#9670;&#160;</a></span>ui8SeedVal</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t ui8SeedVal = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<hr size="1">
    <body>
        <div id="footer" align="right">        
            <small>
                Generated on Wed Oct 1 2025 21:34:27 for the AmbiqSuite Examples Guide by&nbsp;
                <a href="http://www.ambiqmicro.com">
                <img class="footer" src="./ambiq_logo.png" alt="Ambiq"/></a>&nbsp&nbsp Copyright &copy; 2025&nbsp&nbsp<br />
                This documentation is licensed and distributed under the <a rel="license" href="http://opensource.org/licenses/BSD-3-Clause">BSD 3-Clause License</a>.&nbsp&nbsp<br/>
            </small>
        </div>
    </body>
</html>
